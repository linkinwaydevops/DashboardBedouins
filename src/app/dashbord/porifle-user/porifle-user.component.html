<div class="row">
  <div class="col-sm-12">
    <div
      class="profile-bg-picture"
      style="
        background-image: url(assets/images/bg-profile.jpg);
        background-position: bottom;
      "
    ></div>
    <div class="p-sm-3 p-0 profile-user">
      <div class="row g-2">
        <div class="col-lg-3 d-none d-lg-block">
          <div class="profile-user-img p-2 text-start">
            <img
            [src]="
            userProfile.profileImagePath
              ? 'https://bedouinsstudios.com:8089' + userProfile.profileImagePath
              : 'path/to/default/avatar.jpg'
          "
          alt="{{ userProfile.name }}"
          class="avatar-md img-fluid"
            />
          </div>
          <div class="text-start p-1 pt-2">
            <h4 class="fs-17 ellipsis">
              {{ userProfile.name }} {{ userProfile.lastName }}
            </h4>
            <p class="font-13">{{ userProfile.category }}</p>
            <!-- Changez cela avec le bon rÃ´le si disponible -->
            <p class="text-muted mb-0">
              <small>{{ userProfile.location }}</small>
            </p>

            <div
              class="d-flex pt-3 align-items-center justify-content-center flex-xl-nowrap flex-lg-wrap justify-content-md-start"
            >
          

              <button
                class="btn btn-soft-info mt-1"
                (click)="AddProjects(userProfile.id)"
              >
                <i class="mdi mdi-check-all fs-18 me-1 lh-1"></i> Add Projects
              </button>
            </div>
          </div>
          <div class="pt-3 ps-2">
            <p class="text-muted mb-2 font-13">
              <strong>Full Name:</strong>
              <span class="ms-2"
                >{{ userProfile.name }} {{ userProfile.lastName }}</span
              >
            </p>
            <p class="text-muted mb-2 font-13">
              <strong>Mobile:</strong>
              <span class="ms-2">{{ userProfile.mobile }}</span>
            </p>
            <p class="text-muted mb-2 font-13">
              <strong>Email:</strong>
              <span class="ms-2">{{ userProfile.email }}</span>
            </p>
            <p class="text-muted mb-1 font-13">
              <strong>Date of Birth:</strong>
              <span class="ms-2">{{
                userProfile.dateOfBirth | date : "mediumDate"
              }}</span>
            </p>
          </div>

          <div class="text-start mt-4">
            <div *ngFor="let project of projects" class="mb-3">
              <h5>{{ project.projectName }}</h5>
              <div class="d-flex flex-wrap">
                <img
                  *ngFor="let imagePath of project.projectImagePaths"
                  [src]="'https://bedouinsstudios.com:8089' + imagePath"
                  alt="{{ project.projectName }}"
                  class="img-thumbnail me-2"
                  style="max-width: 100px"
                />
              </div>
            </div>
          </div>

        </div>

        <div class="col-lg-9 bg-light-subtle">
          <div class="profile-content">
            <div
              class="nav nav-pills nav-justified gap-0 p-3 text-center"
              id="v-pills-tab"
              role="tablist"
              aria-orientation="vertical"
            >
              <li class="nav-item mt-2">
                <a
                  class="nav-link fs-5 p-2 active"
                  data-bs-toggle="tab"
                  data-bs-target="#aboutme"
                  type="button"
                  role="tab"
                  aria-controls="home"
                  aria-selected="true"
                  href="#aboutme"
                  >About</a
                >
              </li>

              <li class="nav-item mt-2">
                <a
                  class="nav-link fs-5 p-2"
                  data-bs-toggle="tab"
                  data-bs-target="#user-activities"
                  type="button"
                  role="tab"
                  aria-controls="home"
                  aria-selected="true"
                  href="#user-activities"
                  >Activities</a
                >
              </li>
              <li class="nav-item mt-2">
                <a
                  class="nav-link fs-5 p-2"
                  data-bs-toggle="tab"
                  data-bs-target="#edit-profile"
                  type="button"
                  role="tab"
                  aria-controls="home"
                  aria-selected="true"
                  href="#edit-profile"
                  >Settings</a
                >
              </li>
              <li class="nav-item mt-2">
                <a
                  class="nav-link fs-5 p-2"
                  data-bs-toggle="tab"
                  data-bs-target="#projects"
                  type="button"
                  role="tab"
                  aria-controls="home"
                  aria-selected="true"
                  href="#projects"
                  >Projects</a
                >
              </li>
            </div>

            <div class="tab-content m-0 p-2 p-sm-4" id="v-pills-tabContent">
              <div
                class="tab-pane active"
                id="aboutme"
                role="tabpanel"
                aria-labelledby="home-tab"
                tabindex="0"
              >
                <div class="profile-desk">
                 
                  <p class="text-muted fs-16">
                    {{ userProfile.aboutMe }}
                  </p>

                  <h5 class="mt-4 fs-17 text-dark">Contact Information</h5>
                  <table
                    class="table table-condensed table-bordered mb-0 border-top table-striped"
                  >
                    <tbody>
                      
                      <tr>
                        <th scope="row">Email</th>
                        <td>
                          <a href="#" class="ng-binding"> {{userProfile.email}} </a>
                        </td>
                      </tr>

                      <tr>
                        <th scope="row">Phone</th>
                        <td class="ng-binding">{{userProfile.mobile}}</td>
                      </tr>
                
                    </tbody>
                  </table>
                </div>
                <!-- end profile-desk -->
              </div>
              <!-- about-me -->
              <!-- Activities -->
              <div id="user-activities" class="tab-pane">
                <div class="timeline-2">
                  <div *ngFor="let project of PorjectList" class="time-item">
                    <div class="item-info ms-3 mb-3">
                      <div class="text-muted">Project added on: 18/25</div>
                      <p>
                        <strong>
                          <a href="#" class="text-info">{{
                            project.projectName
                          }}</a>
                        </strong>
                        - {{ project.description }}
                      </p>
                      <img
                        *ngIf="project.projectImagePaths"
                        [src]="
                          'https://bedouinsstudios.com:8089' + project.projectImagePaths
                        "
                        alt="{{ project.projectName }}"
                        height="40"
                        width="60"
                        class="rounded-1"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <!-- settings -->
              <div id="edit-profile" class="tab-pane">
                <div class="user-profile-content">
                  <form (ngSubmit)="onSubmit()" #userProfileForm="ngForm">
                    <div id="edit-profile" class="tab-pane">
                      <div class="user-profile-content">
                        <div class="row row-cols-sm-2 row-cols-1">
                          <div class="mb-2">
                            <label class="form-label" for="FullName"
                              >Full Name</label
                            >
                            <input
                              type="text"
                              id="FullName"
                              class="form-control"
                              [(ngModel)]="userProfile.name"
                              name="name"
                              required
                            />
                          </div>
                          <div class="mb-3">
                            <label class="form-label" for="lastName"
                              >Last Name</label
                            >
                            <input
                              type="text"
                              id="lastName"
                              class="form-control"
                              [(ngModel)]="userProfile.lastName"
                              name="lastName"
                              required
                            />
                          </div>
                          <div class="mb-3">
                            <label class="form-label" for="Email">Email</label>
                            <input
                              type="email"
                              id="Email"
                              class="form-control"
                              [(ngModel)]="userProfile.email"
                              name="email"
                              required
                            />
                          </div>
                          <div class="mb-3">
                            <label class="form-label" for="mobile"
                              >Mobile</label
                            >
                            <input
                              type="tel"
                              id="mobile"
                              class="form-control"
                              [(ngModel)]="userProfile.mobile"
                              name="mobile"
                              required
                            />
                          </div>
                          <div class="mb-3">
                            <label class="form-label" for="AboutMe"
                              >About Me</label
                            >
                            <textarea
                              style="height: 125px"
                              id="AboutMe"
                              class="form-control"
                              [(ngModel)]="userProfile.aboutMe"
                              name="aboutMe"
                            >
                            </textarea>
                          </div>

                          <div class="mb-3">
                            <label class="form-label" for="location"
                              >Location</label
                            >
                            <input
                              type="text"
                              id="location"
                              class="form-control"
                              [(ngModel)]="userProfile.location"
                              name="location"
                            />
                          </div>
                          <div class="mb-3">
                            <label class="form-label" for="profileImage"
                              >Profile Image</label
                            >
                            <input
                              type="file"
                              id="profileImage"
                              name="profileImage"
                              class="form-control"
                              (change)="onFileChange($event)"
                            />
                          </div>
                        </div>
                        <button class="btn btn-primary" type="submit">
                          <i
                            class="mdi mdi-content-save-outline me-1 fs-16 lh-1"
                            (ngSubmit)="onSubmit()"
                          ></i>
                          Save
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>

              <div id="projects" class="tab-pane">
                <div class="row m-t-10">
                  <div class="col-md-12">
                    <div class="table-responsive">
                      <table
                        class="table table-bordered mb-0 table-striped table-hover"
                      >
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Project Name</th>
                            <th>Description</th>
                            <th>Due Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody class="table-group-divider">
                          <tr *ngFor="let project of PorjectList">
                            <td>{{ project.id }}</td>
                            <td>{{ project.projectName }}</td>
                            <td>{{ project.description }}</td>
                            <td>hhhh</td>
                            <td>
                              <span class="badge bg-info"
                                >Work in Progress</span
                              >
                            </td>
                            <td>
                              <button
                                class="btn btn-success rounded-pill me-2"
                                data-bs-toggle="modal"
                                data-bs-target="#projectModal"
                                (click)="openProjectModal(project)"
                                title="View"
                              >
                                <i class="ri-eye-line"></i>
                              </button>
                              <button
                                class="btn btn-warning rounded-pill me-2"
                                (click)="viewProjectDetails(project.id)"
                                title="Edit"
                              >
                                <i class="ri-pencil-line"></i>
                              </button>
                              <button
                                class="btn btn-danger rounded-pill me-2"
                                (click)="deleteProject(project.id)"
                                title="Delete"
                              >
                                <i class="ri-delete-bin-line"></i>
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Modal -->
              <!-- Modal -->
              <!-- Modal -->
              <div
              class="modal fade"
              id="projectModal"
              tabindex="-1"
              aria-labelledby="projectModalLabel"
              aria-hidden="true"
          >
              <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="projectModalLabel">
                              {{ selectedProject?.projectName }}
                          </h5>
                          <button
                              type="button"
                              class="btn-close"
                              data-bs-dismiss="modal"
                              aria-label="Close"
                          ></button>
                      </div>
                      <div class="modal-body">
                          <p>{{ selectedProject?.description }}</p>
                          <div class="row">
                              <div class="col-12">
                                  <div class="row">
                                      <div *ngFor="let image of selectedProject?.projectImagePaths" class="col-4 mb-3">
                                          <div class="card">
                                              <img [src]="image ? ('https://bedouinsstudios.com:8089' + image) : 'path/to/default/avatar.jpg'" 
                                                  alt="" class="card-img-top img-fluid rounded">
                                              <div class="card-body">
                                                  <p class="card-text">Description or some text</p>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="modal-footer">
                          <button
                              type="button"
                              class="btn btn-secondary"
                              data-bs-dismiss="modal"
                          >
                              Close
                          </button>
                      </div>
                  </div>
              </div>
          </div>
              <!-- profile -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS avec Popper.js -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
